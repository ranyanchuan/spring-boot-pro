<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yyan.dao.RoleDao">

    <!--添加角色-->
    <insert id="insertRole" parameterType="com.yyan.pojo.Role">
        insert into role(id, title,create_time,update_time)
            values(#{id}, #{title},#{createTime},#{updateTime})
    </insert>

    <!-- 通过id 获取角色-->
    <select id="getRoleById" resultType="com.yyan.pojo.Role">
        select id,title,create_time as createTime,update_time as updateTime from role where id=#{id};
    </select>

    <!-- 通过id 获取角色-->
    <select id="getAllRoleByField" parameterType="java.util.HashMap" resultType="java.lang.Integer">
        select count(id) from role WHERE 1=1
        <if test="title != null">
            and title=#{title}
        </if>
        <if test="id != null">
            and id=#{id}
        </if>
    </select>

    <!-- 通过分页查询角色-->
    <select id="getAllRole" parameterType="java.util.HashMap" resultType="com.yyan.pojo.Role">
        select
        id,
        title,
        create_time as createTime,
        update_time as updateTime from role WHERE 1=1
        <if test="title != null">
            and title like '%${title}%'
        </if>
        <if test="id != null">
            and id like '%${id}%'
        </if>
        limit ${pageIndex*size},${(pageIndex+1)*size};
    </select>


    <!--查询分页总条数-->
    <select id="selectCount" parameterType="java.util.HashMap" resultType="java.lang.Integer">
        select count(id) from role WHERE 1=1
        <if test="title != null">
            and title like '%${title}%'
        </if>
        <if test="id != null">
            and id like '%${id}%'
        </if>
    </select>


    <!-- 删除角色-->
    <delete id="deleteRole" parameterType="com.yyan.pojo.Role">
        delete from role where id=#{id};
    </delete>

    <!-- 更新角色-->
    <update id="updateRole" parameterType="com.yyan.pojo.Role">
        update role set title=#{title},update_time=#{updateTime} where id=#{id};
    </update>

</mapper>